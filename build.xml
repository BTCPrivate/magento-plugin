<?xml version="1.0" encoding="UTF-8"?>
<project name="bitpay/magento-plugin" default="build">
    <target name="build" depends="lint,phpunit,coveralls" />

    <target name="clean" hidden="true">
        <delete dir="build/logs" verbose="true" />
    </target>

    <target name="prepare" depends="clean" hidden="true">
        <mkdir dir="build/logs" />
    </target>

    <target name="lint" depends="prepare">
        <phplint>
            <fileset dir="app/code/community/Bitpay/Bitcoins">
                <include name="**/*.php"/>
            </fileset>
            <fileset dir="lib/bitpay">
                <include name="**/*.php"/>
            </fileset>
        </phplint>
    </target>

    <target name="phpunit">
        <exec executable="bin/phpunit" passthru="true" />
    </target>

    <target name="coveralls">
        <exec executable="bin/coveralls" passthru="true" />
    </target>
</project>
